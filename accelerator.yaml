accelerator:
  displayName: Bitnami MLflow Accelerator
  description: Template for deploying Bitnami MLflow to TAP
  iconUrl: https://static-00.iconduck.com/assets.00/airflow-icon-512x512-tpr318yf.png
  tags:
  - "ML"
  - "AI"
  - "pipeline"
  - "datascience"
  - "MLOps"
  - "workflow"
  - "python"
  - "data"
  - "mlflow"
  options:
    - name: mlflow
      inputType: radio
      display: true
      choices:
        - text: 'MLflow (ML Training)'
          value: selected
      defaultValue: selected
      dependsOn:
        name: mlPlatformType
        value: training
    - name: mlPlatformType
      inputType: radio
      display: true
      choices:
        - text: 'View guidance manual: https://github.com/bitnami/charts/tree/main/bitnami/mlflow'
          value: training
      defaultValue: training
    - name: mlflowTrackingEnabled
      inputType: text
      display: true
      label: 'tracking.enabled'
      defaultValue: 'true'
      dependsOn:
        name: mlPlatformType
        value: training
    - name: mlflowTrackingServiceType
      inputType: text
      display: true
      label: 'tracking.service.type'
      defaultValue: 'LoadBalancer'
      dependsOn:
        name: mlPlatformType
        value: training
    - name: mlflowTrackingIngressEnabled
      inputType: text
      display: true
      label: 'tracking.ingress.enabled'
      defaultValue: 'true'
      dependsOn:
        name: mlPlatformType
        value: training
    - name: mlflowTrackingIngressHostname
      inputType: text
      display: true
      label: 'tracking.ingress.hostname'
      defaultValue: 'yourhostname.com'
      dependsOn:
        name: mlPlatformType
        value: training
    - name: mlflowTrackingIngressTls
      inputType: text
      display: true
      label: 'tracking.ingress.tls'
      defaultValue: 'true'
      dependsOn:
        name: mlPlatformType
        value: training
    - name: mlflowTrackingIngressSelfSigned
      inputType: text
      display: true
      label: 'tracking.ingress.selfSigned'
      defaultValue: 'true'
      dependsOn:
        name: mlPlatformType
        value: training
    - name: mlflowTrackingMetricsEnabled
      inputType: text
      display: true
      label: 'tracking.metrics.enabled'
      defaultValue: 'true'
      dependsOn:
        name: mlPlatformType
        value: training

engine:
  type: Merge
  sources:
    - type: Chain
      transformations:
        - type: Include
          patterns: [ '**/**.yaml' ]
        - type: ReplaceText
          substitutions:
            - text: REPLACE_MLFLOW_TRACKING_ENABLED
              with: "#mlflowTrackingEnabled"
            - text: REPLACE_MLFLOW_TRACKING_SERVICE_TYPE
              with: "#mlflowTrackingServiceType"
            - text: REPLACE_MLFLOW_TRACKING_INGRESS_ENABLED
              with: "#mlflowTrackingIngressEnabled"
            - text: REPLACE_MLFLOW_TRACKING_INGRESS_HOSTNAME
              with: "#mlflowTrackingIngressHostname"
            - text: REPLACE_MLFLOW_TRACKING_INGRESS_TLS
              with: "#mlflowTrackingIngressTls"
            - text: REPLACE_MLFLOW_TRACKING_INGRESS_SELFSIGNED
              with: "#mlflowTrackingIngressSelfSigned"
            - text: REPLACE_MLFLOW_TRACKING_METRICS_ENABLED
              with: "#mlflowTrackingMetricsEnabled"

